{"version":3,"file":"main.js","sources":["main.js"],"sourcesContent":["const \r\n    id = Id => document.getElementById(Id),\r\n    $ = QuerySelector => document.querySelector(QuerySelector)\r\n    _$ = QueryAll => document.querySelectorAll(QueryAll)\r\n\r\nHTMLElement.prototype.$ = function(querySelector){\r\n    return this.querySelector(querySelector)\r\n}\r\n\r\nHTMLElement.prototype._$ = function(querySelector){\r\n    return this.querySelectorAll(querySelector)\r\n}\r\nclass Menu {\r\n    constructor(selectablesAttr, activeCls, openCls, dropdownCls, optionCls){\r\n\r\n        this.selectablesAttr = selectablesAttr\r\n        this.activeCls = activeCls\r\n        this.openCls = openCls\r\n        this.dropdownCls = dropdownCls\r\n        this.optionCls = optionCls\r\n    }\r\n\r\n    //search in the parents of the element\r\n    #searchUp(element, attr, query){\r\n\r\n        //input validation\r\n        if(\r\n            !element || !attr\r\n            || typeof attr != \"string\" \r\n            || !element.parentElement\r\n\r\n        ){ throw Error(\"Unexpected: two valid arguments are required\")}\r\n\r\n        //get the first matching parent\r\n        let parent = element\r\n        while(!parent?.getAttribute(attr)?.includes(query) && parent.tagName != \"HTML\"){\r\n\r\n            parent = parent.parentElement\r\n        }\r\n\r\n        // return the parent element \r\n        return parent.tagName == \"HTML\"? false : parent\r\n    }\r\n\r\n    // Add the height and margins of the element and multiply \r\n    // by the number of children to get the height of the container.\r\n    #getHeight(element){\r\n        const Styles = getComputedStyle(element.children[1].children[0])\r\n        const getNumber = text => parseInt(text.split(\"px\")[0])\r\n        return `${\r\n            (getNumber(Styles.height) \r\n            + getNumber(Styles.marginBottom)\r\n            + getNumber(Styles.marginTop))\r\n            * element.children[1].children.length\r\n        }px`\r\n    }\r\n\r\n    // Remove class and styles from elements\r\n    #removeClass(){\r\n        _$(`.${this.dropdownCls}`)\r\n            .forEach(e => e.removeAttribute(\"style\"))\r\n\r\n        _$(`[${this.selectablesAttr}]`)\r\n            .forEach(e => {\r\n                e.classList.remove(this.activeCls)\r\n                e.classList.remove(this.openCls)\r\n            })\r\n    }\r\n\r\n    //Set styles for elements active and open\r\n    #setStyles(element){\r\n\r\n        const container = this.#searchUp(element, \"class\", this.optionCls)\r\n        const active = this.#searchUp(element, this.selectablesAttr, \"\")\r\n        const moreOptions = container.$(\".\"+this.dropdownCls)\r\n        \r\n        if(moreOptions) {\r\n            moreOptions.style.height = this.#getHeight(container)\r\n            console.log(\"xd\")    \r\n        }\r\n        container.$(`[${this.selectablesAttr}]`).classList.add(this.openCls)\r\n        active.classList.add(this.activeCls)\r\n    }\r\n\r\n    //Open the item and close the others\r\n    open(element){\r\n        this.#removeClass()\r\n        this.#setStyles(element)\r\n    }\r\n}\r\n\r\nconst menu = new Menu(\"swicht\", \"active\", \"open\", \"more\", \"option\")\r\n\r\n\r\n\r\nlet openScreen = undefined\r\n\r\nconst screenVisible = (screen) => {\r\n\r\n    const screenToShow = $(`[scr=\"${screen}\"]`)\r\n    \r\n    if(openScreen !== screen){\r\n\r\n        menu.open($(`[href=\"${screen}\"]`))\r\n\r\n        _$(\"article[scr]\").forEach(_screen => {\r\n\r\n            if(_screen !== screenToShow){\r\n\r\n                _screen.removeAttribute(\"style\")\r\n            }\r\n        })\r\n\r\n        openScreen = screen\r\n    }\r\n\r\n    screenToShow.setAttribute(\"style\", `opacity: 1; z-index: 3`)\r\n}\r\n\r\nlocation.hash = location.hash || \"home\"\r\nscreenVisible(location.hash)\r\nconst observerFunction = entrys => {\r\n\r\n    entrys.forEach(entry => {\r\n        const id = entry.target.id\r\n\r\n        if(entry.isIntersecting && `#${id}` !== location.hash) {\r\n\r\n            location.hash = id\r\n        }\r\n    })\r\n}\r\n\r\nconst observer = new IntersectionObserver(observerFunction, {threshold: 1})\r\n\r\n\r\n\r\nonhashchange = () => screenVisible(location.hash)\r\n\r\n\r\n\r\n_$(\".view\").forEach(article => observer.observe(article))\r\n\r\nsetTimeout(() => {\r\n   location.reload()\r\n}, 10000000);\r\n"],"names":["id","Id","document","getElementById","$","QuerySelector","querySelector","_$","QueryAll","querySelectorAll","HTMLElement","prototype","this","Menu","constructor","selectablesAttr","activeCls","openCls","dropdownCls","optionCls","#searchUp","element","attr","query","parentElement","Error","let","parent","getAttribute","includes","tagName","#getHeight","Styles","getComputedStyle","children","getNumber","text","parseInt","split","height","marginBottom","marginTop","length","#removeClass","forEach","e","removeAttribute","classList","remove","#setStyles","container","active","moreOptions","style","console","log","add","open","menu","openScreen","undefined","screenVisible","screenToShow","screen","_screen","setAttribute","location","hash","observerFunction","entrys","entry","target","isIntersecting","observer","IntersectionObserver","threshold","onhashchange","article","observe","setTimeout","reload"],"mappings":"AAAA,MACIA,GAAKC,GAAMC,SAASC,eAAeF,GACnCG,EAAIC,GAAiBH,SAASI,cAAcD,GAC5CE,GAAKC,GAAYN,SAASO,iBAAiBD,GAE/CE,YAAYC,UAAUP,EAAI,SAASE,GAC/B,OAAOM,KAAKN,cAAcA,IAG9BI,YAAYC,UAAUJ,GAAK,SAASD,GAChC,OAAOM,KAAKH,iBAAiBH,UAE3BO,KACFC,YAAYC,EAAiBC,EAAWC,EAASC,EAAaC,GAE1DP,KAAKG,gBAAkBA,EACvBH,KAAKI,UAAYA,EACjBJ,KAAKK,QAAUA,EACfL,KAAKM,YAAcA,EACnBN,KAAKO,UAAYA,EAIrBC,UAAUC,EAASC,EAAMC,GAGrB,IACKF,IAAYC,GACK,iBAARA,IACND,EAAQG,cAEb,MAAMC,MAAM,gDAGfC,IAAIC,EAASN,EACb,MAAOM,GAAQC,aAAaN,IAAOO,SAASN,IAA4B,QAAlBI,EAAOG,SAEzDH,EAASA,EAAOH,cAIpB,MAAyB,QAAlBG,EAAOG,SAA2BH,EAK7CI,WAAWV,GACP,IAAMW,EAASC,iBAAiBZ,EAAQa,SAAS,GAAGA,SAAS,IACvDC,EAAYC,GAAQC,SAASD,EAAKE,MAAM,MAAM,IACpD,OACKH,EAAUH,EAAOO,QAChBJ,EAAUH,EAAOQ,cACjBL,EAAUH,EAAOS,YACjBpB,EAAQa,SAAS,GAAGA,SAASQ,OAJ5B,KASXC,eACIpC,GAAG,IAAIK,KAAKM,aACP0B,QAAQC,GAAKA,EAAEC,gBAAgB,UAEpCvC,OAAOK,KAAKG,oBACP6B,QAAQC,IACLA,EAAEE,UAAUC,OAAOpC,KAAKI,WACxB6B,EAAEE,UAAUC,OAAOpC,KAAKK,WAKpCgC,WAAW5B,GAEP,MAAM6B,EAAYtC,KAAKQ,UAAUC,EAAS,QAAST,KAAKO,WAClDgC,EAASvC,KAAKQ,UAAUC,EAAST,KAAKG,gBAAiB,IACvDqC,EAAcF,EAAU9C,EAAE,IAAIQ,KAAKM,aAEtCkC,IACCA,EAAYC,MAAMd,OAAS3B,KAAKmB,WAAWmB,GAC3CI,QAAQC,IAAI,OAEhBL,EAAU9C,MAAMQ,KAAKG,oBAAoBgC,UAAUS,IAAI5C,KAAKK,SAC5DkC,EAAOJ,UAAUS,IAAI5C,KAAKI,WAI9ByC,KAAKpC,GACDT,KAAK+B,eACL/B,KAAKqC,WAAW5B,IAIxB,MAAMqC,KAAO,IAAI7C,KAAK,SAAU,SAAU,OAAQ,OAAQ,UAI1Da,IAAIiC,gBAAaC,EAEjB,MAAMC,cAAgB,IAElB,MAAMC,EAAe1D,WAAW2D,OAE7BJ,aAAeI,IAEdL,KAAKD,KAAKrD,YAAY2D,QAEtBxD,GAAG,gBAAgBqC,QAAQoB,IAEpBA,IAAYF,GAEXE,EAAQlB,gBAAgB,WAIhCa,WAAaI,GAGjBD,EAAaG,aAAa,QAAS,2BAGvCC,SAASC,KAAOD,SAASC,MAAQ,OACjCN,cAAcK,SAASC,MACvB,MAAMC,iBAAmBC,IAErBA,EAAOzB,QAAQ0B,IACX,IAAMtE,EAAKsE,EAAMC,OAAOvE,GAErBsE,EAAME,gBAAkB,IAAIxE,IAASkE,SAASC,OAE7CD,SAASC,KAAOnE,MAKtByE,SAAW,IAAIC,qBAAqBN,iBAAkB,CAACO,UAAW,IAIxEC,aAAe,IAAMf,cAAcK,SAASC,MAI5C5D,GAAG,SAASqC,QAAQiC,GAAWJ,SAASK,QAAQD,IAEhDE,WAAW,KACRb,SAASc,UACT"}