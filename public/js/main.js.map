{"version":3,"file":"main.js","sources":["main.js"],"sourcesContent":["const \r\n    id = Id => document.getElementById(Id),\r\n    $ = QuerySelector => document.querySelector(QuerySelector)\r\n    _$ = QueryAll => document.querySelectorAll(QueryAll)\r\n\r\nHTMLElement.prototype.$ = function(querySelector){\r\n    return this.querySelector(querySelector)\r\n}\r\n\r\nHTMLElement.prototype._$ = function(querySelector){\r\n    return this.querySelectorAll(querySelector)\r\n}\r\nclass Menu {\r\n    constructor(toggleActiveAttr, activeClass, openClass, moreContainerClass, optionClass){\r\n\r\n        this.toggleActiveAttr = toggleActiveAttr\r\n        this.activeClass = activeClass\r\n        this.openClass = openClass\r\n        this.moreContainerClass = moreContainerClass\r\n        this.optionClass = optionClass\r\n    }\r\n\r\n    //search in the parents of the element\r\n    #searchUp(element, attr, search){\r\n\r\n        //input validation\r\n        if(\r\n            !element || !attr\r\n            || typeof attr != \"string\" \r\n            || !element.parentElement\r\n\r\n        ){ throw Error(\"Unexpected: two valid arguments are required\")}\r\n\r\n        //get the first matching parent\r\n        let parent = element\r\n        while(!parent?.getAttribute(attr)?.includes(search) && parent.tagName != \"HTML\"){\r\n\r\n            parent = parent.parentElement\r\n        }\r\n\r\n        // return the parent element \r\n        return parent.tagName == \"HTML\"? false : parent\r\n    }\r\n\r\n    // Add the height and margins of the element and multiply \r\n    // by the number of children to get the height of the container.\r\n    #getHeight(element){\r\n        const Styles = getComputedStyle(element.children[1].children[0])\r\n        const getNumber = text => parseInt(text.split(\"px\")[0])\r\n        return `${\r\n            (getNumber(Styles.height) \r\n            + getNumber(Styles.marginBottom))\r\n            * element.children[1].children.length\r\n        }px`\r\n    }\r\n\r\n    // Remove class and styles from elements\r\n    #removeClass(){\r\n        _$(`.${this.moreContainerClass}`)\r\n            .forEach(e => e.removeAttribute(\"style\"))\r\n\r\n        _$(`[${this.toggleActiveAttr}]`)\r\n            .forEach(e => {\r\n                e.classList.remove(this.activeClass)\r\n                e.classList.remove(this.openClass)\r\n            })\r\n    }\r\n\r\n    //Set styles for elements active and open\r\n    #setStyles(element){\r\n\r\n        const container = this.#searchUp(element, \"class\", this.optionClass)\r\n        const active = this.#searchUp(element, this.toggleActiveAttr, \"\")\r\n        const moreOptions = container.$(\".\"+this.moreContainerClass)\r\n        if(moreOptions) moreOptions.style.height = this.#getHeight(container)\r\n\r\n        container.$(`[${this.toggleActiveAttr}]`).classList.add(this.openClass)\r\n        active.classList.add(this.activeClass)\r\n    }\r\n\r\n    //Open the item and close the others\r\n    open(element){\r\n        this.#removeClass()\r\n        this.#setStyles(element)\r\n    }\r\n}\r\n\r\nconst menu = new Menu(\"swicht\", \"active\", \"open\", \"more\", \"option\")\r\n\r\nlocation.href = location.hash.length > 2? location.hash : \"#home\"\r\n\r\nconst screenVisible = () => {\r\n    menu.open($(`[href=\"${location.hash}\"]`))\r\n\r\n    _$(\"article[id]\").forEach(article => {\r\n\r\n            article.removeAttribute(\"style\")\r\n    })\r\n    $(location.hash).style.opacity = \"1\"\r\n\r\n}\r\n\r\nonhashchange = screenVisible\r\nscreenVisible()\r\n\r\n\r\n\r\nconst observer = new IntersectionObserver((entrys, observer)=> {\r\n    entrys.forEach(entry => {\r\n        if(entry.isIntersecting)\r\n            location.href = `#${entry.target.id}`\r\n    })\r\n}, {threshold: 1, rootMargin: \"0px 0px 60% 0px\"})\r\n\r\n_$(\"article[id]\").forEach(article => observer.observe(article))\r\n\r\nsetTimeout(() => {\r\n   location.href = \"/\" \r\n}, 1000000);"],"names":["id","Id","document","getElementById","$","QuerySelector","querySelector","_$","QueryAll","querySelectorAll","HTMLElement","prototype","this","Menu","constructor","toggleActiveAttr","activeClass","openClass","moreContainerClass","optionClass","#searchUp","element","attr","search","parentElement","Error","let","parent","getAttribute","includes","tagName","#getHeight","Styles","getComputedStyle","children","getNumber","text","parseInt","split","height","marginBottom","length","#removeClass","forEach","e","removeAttribute","classList","remove","#setStyles","container","active","moreOptions","style","add","open","menu","location","href","hash","screenVisible","article","opacity","onhashchange","observer","IntersectionObserver","entrys","entry","isIntersecting","target","threshold","rootMargin","observe","setTimeout"],"mappings":"AAAA,MACIA,GAAKC,GAAMC,SAASC,eAAeF,GACnCG,EAAIC,GAAiBH,SAASI,cAAcD,GAC5CE,GAAKC,GAAYN,SAASO,iBAAiBD,GAE/CE,YAAYC,UAAUP,EAAI,SAASE,GAC/B,OAAOM,KAAKN,cAAcA,IAG9BI,YAAYC,UAAUJ,GAAK,SAASD,GAChC,OAAOM,KAAKH,iBAAiBH,UAE3BO,KACFC,YAAYC,EAAkBC,EAAaC,EAAWC,EAAoBC,GAEtEP,KAAKG,iBAAmBA,EACxBH,KAAKI,YAAcA,EACnBJ,KAAKK,UAAYA,EACjBL,KAAKM,mBAAqBA,EAC1BN,KAAKO,YAAcA,EAIvBC,UAAUC,EAASC,EAAMC,GAGrB,IACKF,IAAYC,GACK,iBAARA,IACND,EAAQG,cAEb,MAAMC,MAAM,gDAGfC,IAAIC,EAASN,EACb,MAAOM,GAAQC,aAAaN,IAAOO,SAASN,IAA6B,QAAlBI,EAAOG,SAE1DH,EAASA,EAAOH,cAIpB,MAAyB,QAAlBG,EAAOG,SAA2BH,EAK7CI,WAAWV,GACP,IAAMW,EAASC,iBAAiBZ,EAAQa,SAAS,GAAGA,SAAS,IACvDC,EAAYC,GAAQC,SAASD,EAAKE,MAAM,MAAM,IACpD,OACKH,EAAUH,EAAOO,QAChBJ,EAAUH,EAAOQ,eACjBnB,EAAQa,SAAS,GAAGA,SAASO,OAH5B,KAQXC,eACInC,GAAG,IAAIK,KAAKM,oBACPyB,QAAQC,GAAKA,EAAEC,gBAAgB,UAEpCtC,OAAOK,KAAKG,qBACP4B,QAAQC,IACLA,EAAEE,UAAUC,OAAOnC,KAAKI,aACxB4B,EAAEE,UAAUC,OAAOnC,KAAKK,aAKpC+B,WAAW3B,GAEP,MAAM4B,EAAYrC,KAAKQ,UAAUC,EAAS,QAAST,KAAKO,aAClD+B,EAAStC,KAAKQ,UAAUC,EAAST,KAAKG,iBAAkB,IACxDoC,EAAcF,EAAU7C,EAAE,IAAIQ,KAAKM,oBACtCiC,IAAaA,EAAYC,MAAMb,OAAS3B,KAAKmB,WAAWkB,IAE3DA,EAAU7C,MAAMQ,KAAKG,qBAAqB+B,UAAUO,IAAIzC,KAAKK,WAC7DiC,EAAOJ,UAAUO,IAAIzC,KAAKI,aAI9BsC,KAAKjC,GACDT,KAAK8B,eACL9B,KAAKoC,WAAW3B,IAIxB,MAAMkC,KAAO,IAAI1C,KAAK,SAAU,SAAU,OAAQ,OAAQ,UAE1D2C,SAASC,KAA8B,EAAvBD,SAASE,KAAKjB,OAAYe,SAASE,KAAO,QAE1D,MAAMC,cAAgB,KAClBJ,KAAKD,KAAKlD,YAAYoD,SAASE,WAE/BnD,GAAG,eAAeoC,QAAQiB,IAElBA,EAAQf,gBAAgB,WAEhCzC,EAAEoD,SAASE,MAAMN,MAAMS,QAAU,KAIrCC,aAAeH,cACfA,gBAIA,MAAMI,SAAW,IAAIC,qBAAqB,CAACC,EAAQF,KAC/CE,EAAOtB,QAAQuB,IACRA,EAAMC,iBACLX,SAASC,KAAO,IAAIS,EAAME,OAAOpE,OAE1C,CAACqE,UAAW,EAAGC,WAAY,oBAE9B/D,GAAG,eAAeoC,QAAQiB,GAAWG,SAASQ,QAAQX,IAEtDY,WAAW,KACRhB,SAASC,KAAO,KAChB"}