{"version":3,"file":"_main.js","sources":["_main.js"],"sourcesContent":["const \r\n    id = Id => document.getElementById(Id),\r\n    $ = query =>  document.querySelector(query),\r\n    $All = query => document.querySelectorAll(query)\r\n\r\nHTMLElement.prototype.$ = function(query){\r\n    return this.querySelector(query)\r\n}\r\n\r\nHTMLElement.prototype.$All = function(query){\r\n    return this.querySelectorAll(query)\r\n}\r\n\r\nHTMLElement.prototype.css = function(styles){\r\n    return this.setQUERYibute(\"css\", styles)\r\n}\r\n\r\n//Menu controler\r\nclass Menu {\r\n\r\n    constructor(selectedOptionClass, openMenuClass, menuContainer){\r\n\r\n        this.SELECTED_OPTION_CLASS = selectedOptionClass\r\n        this.OPEN_MENU_CLASS = openMenuClass\r\n        this.MENU_CONTAINER = menuContainer\r\n    }\r\n\r\n    //search in the parents of the element\r\n    //the first match\r\n    #lookUp(START_ELEMENT, QUERY){\r\n\r\n        //input validation\r\n        if(\r\n            !START_ELEMENT || !QUERY\r\n            || typeof QUERY != \"string\" \r\n            || !START_ELEMENT.parentElement\r\n\r\n        ){ throw Error(\"Unexpected: two valid arguments are required\")}\r\n\r\n        //Get the first matching parent\r\n        let parent = START_ELEMENT\r\n        while (!parent.className.includes(QUERY)  && parent.tagName != \"HTML\") {\r\n            parent = parent.parentElement\r\n        }\r\n\r\n        return parent.tagName == \"HTML\"? false : parent\r\n\r\n    }\r\n\r\n    // Add the height and margins of the menu options and multiply \r\n    // by the number of children to get the height need of the container.\r\n    #getHeight(dropdown){\r\n\r\n        const FIRST_OPTION = dropdown.firstChild \r\n        const CHILDREN_LENGTH = dropdown.children.length\r\n        const OPTION_STYLES = getComputedStyle(FIRST_OPTION)\r\n        const { height, marginTop, marginBottom } = OPTION_STYLES\r\n        const RESULT = `calc((${height} + ${marginTop} + ${marginBottom}) * ${CHILDREN_LENGTH})`\r\n        return RESULT\r\n    }\r\n\r\n    #removeStyles(isToUnfold, isToSelect){\r\n\r\n        $All(\".dropdown\").forEach(dropdown => {\r\n            \r\n            \r\n            if(isToUnfold != dropdown){\r\n\r\n                dropdown.style.height = 0\r\n            }\r\n        })\r\n\r\n        const SELECTABLES = this.MENU_CONTAINER.$All(\".selectable\")\r\n        SELECTABLES.forEach( selectable => {\r\n            \r\n            if(isToSelect !== selectable){\r\n\r\n                selectable.classList.remove(\"open\")\r\n                selectable.classList.remove(\"selected\")\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    #setStyles(isToUnfold, isToSelect, menuOption){\r\n\r\n        const SELECTABLE = menuOption.$(\".selectable\")\r\n        if(isToUnfold){\r\n\r\n            isToUnfold.style.height = this.#getHeight(isToUnfold)\r\n        }\r\n\r\n        SELECTABLE.classList.add(this.OPEN_MENU_CLASS)\r\n        isToSelect.classList.add(this.SELECTED_OPTION_CLASS)\r\n    }\r\n\r\n    open(itemToOpen){\r\n\r\n        const MENU_OPTION =  this.#lookUp(itemToOpen, \"menu_option\")\r\n        const IS_TO_UNFOLD = MENU_OPTION.$(\".dropdown\")\r\n        const IS_TO_SELECT = this.#lookUp(itemToOpen, \"selectable\")\r\n\r\n        this.#removeStyles(IS_TO_UNFOLD, IS_TO_SELECT)\r\n        this.#setStyles(IS_TO_UNFOLD, IS_TO_SELECT, MENU_OPTION)\r\n        \r\n    }\r\n\r\n}\r\n\r\nconst menu = new Menu(\"selected\", \"open\", id(\"menu\"))\r\n\r\nlet openScreen\r\n\r\nconst screenVisible = screenName => {\r\n\r\n    const SCREEN_TO_SHOW = $(`[scr=\"${screenName}\"]`)\r\n    const MENU_TO_SELECT = $(`[href=\"${screenName}\"]`)\r\n\r\n    if(openScreen !== SCREEN_TO_SHOW){\r\n\r\n        menu.open(MENU_TO_SELECT)\r\n\r\n        $All(\"article[scr]\").forEach(screen => {\r\n\r\n            if(screen !== SCREEN_TO_SHOW){\r\n\r\n                screen.removeAttribute(\"style\")\r\n            }\r\n        })\r\n\r\n        openScreen = screenName\r\n    }\r\n    SCREEN_TO_SHOW.setAttribute(\"style\", `opacity: 1; z-index: 3`)\r\n}\r\n\r\nconst observerFunction = entrys => {\r\n\r\n    entrys.forEach(entry => {\r\n        const ID = entry.target.id\r\n\r\n        if(entry.isIntersecting && `#${ID}` !== location.hash) {\r\n\r\n            location.hash = ID\r\n        }\r\n    })\r\n}\r\nconst observer = new IntersectionObserver(observerFunction, {threshold: 1})\r\n$All(\".view\").forEach( screen => observer.observe(screen))\r\n\r\nlocation.hash = location.hash || \"home\"\r\nscreenVisible(location.hash)\r\nonhashchange = () => screenVisible(location.hash)"],"names":["id","Id","document","getElementById","$","query","querySelector","$All","querySelectorAll","HTMLElement","prototype","this","css","styles","setQUERYibute","Menu","constructor","selectedOptionClass","openMenuClass","menuContainer","SELECTED_OPTION_CLASS","OPEN_MENU_CLASS","MENU_CONTAINER","#lookUp","START_ELEMENT","QUERY","parentElement","Error","let","parent","className","includes","tagName","#getHeight","dropdown","FIRST_OPTION","firstChild","CHILDREN_LENGTH","children","length","height","marginTop","marginBottom","getComputedStyle","#removeStyles","isToUnfold","isToSelect","forEach","style","SELECTABLES","selectable","classList","remove","#setStyles","menuOption","SELECTABLE","add","open","itemToOpen","MENU_OPTION","IS_TO_UNFOLD","IS_TO_SELECT","menu","openScreen","screenVisible","screenName","SCREEN_TO_SHOW","MENU_TO_SELECT","screen","removeAttribute","setAttribute","observerFunction","entrys","entry","ID","target","isIntersecting","location","hash","observer","IntersectionObserver","threshold","observe","onhashchange"],"mappings":"AAAA,MACIA,GAAKC,GAAMC,SAASC,eAAeF,GACnCG,EAAIC,GAAUH,SAASI,cAAcD,GACrCE,KAAOF,GAASH,SAASM,iBAAiBH,GAE9CI,YAAYC,UAAUN,EAAI,SAASC,GAC/B,OAAOM,KAAKL,cAAcD,IAG9BI,YAAYC,UAAUH,KAAO,SAASF,GAClC,OAAOM,KAAKH,iBAAiBH,IAGjCI,YAAYC,UAAUE,IAAM,SAASC,GACjC,OAAOF,KAAKG,cAAc,MAAOD,UAI/BE,KAEFC,YAAYC,EAAqBC,EAAeC,GAE5CR,KAAKS,sBAAwBH,EAC7BN,KAAKU,gBAAkBH,EACvBP,KAAKW,eAAiBH,EAK1BI,QAAQC,EAAeC,GAGnB,IACKD,IAAkBC,GACA,iBAATA,IACND,EAAcE,cAEnB,MAAMC,MAAM,gDAGfC,IAAIC,EAASL,EACb,MAAQK,EAAOC,UAAUC,SAASN,IAA6B,QAAlBI,EAAOG,SAChDH,EAASA,EAAOH,cAGpB,MAAyB,QAAlBG,EAAOG,SAA2BH,EAM7CI,WAAWC,GAEP,IAAMC,EAAeD,EAASE,WACxBC,EAAkBH,EAASI,SAASC,OAEpC,CAAEC,OAAAA,EAAQC,UAAAA,EAAWC,aAAAA,GADLC,iBAAiBR,GAGvC,eADwBK,OAAYC,OAAeC,QAAmBL,KAI1EO,cAAcC,EAAYC,GAEtBvC,KAAK,aAAawC,QAAQb,IAGnBW,GAAcX,IAEbA,EAASc,MAAMR,OAAS,KAIhC,MAAMS,EAActC,KAAKW,eAAef,KAAK,eAC7C0C,EAAYF,QAASG,IAEdJ,IAAeI,IAEdA,EAAWC,UAAUC,OAAO,QAC5BF,EAAWC,UAAUC,OAAO,eAMxCC,WAAWR,EAAYC,EAAYQ,GAE/B,MAAMC,EAAaD,EAAWlD,EAAE,eAC7ByC,IAECA,EAAWG,MAAMR,OAAS7B,KAAKsB,WAAWY,IAG9CU,EAAWJ,UAAUK,IAAI7C,KAAKU,iBAC9ByB,EAAWK,UAAUK,IAAI7C,KAAKS,uBAGlCqC,KAAKC,GAED,MAAMC,EAAehD,KAAKY,QAAQmC,EAAY,eAC9C,IAAME,EAAeD,EAAYvD,EAAE,aAC7ByD,EAAelD,KAAKY,QAAQmC,EAAY,cAE9C/C,KAAKiC,cAAcgB,EAAcC,GACjClD,KAAK0C,WAAWO,EAAcC,EAAcF,IAMpD,MAAMG,KAAO,IAAI/C,KAAK,WAAY,OAAQf,GAAG,SAE7C4B,IAAImC,WAEJ,MAAMC,cAAgBC,IAElB,MAAMC,EAAiB9D,WAAW6D,OAClC,IAAME,EAAiB/D,YAAY6D,OAEhCF,aAAeG,IAEdJ,KAAKL,KAAKU,GAEV5D,KAAK,gBAAgBwC,QAAQqB,IAEtBA,IAAWF,GAEVE,EAAOC,gBAAgB,WAI/BN,WAAaE,GAEjBC,EAAeI,aAAa,QAAS,2BAGnCC,iBAAmBC,IAErBA,EAAOzB,QAAQ0B,IACX,IAAMC,EAAKD,EAAME,OAAO3E,GAErByE,EAAMG,gBAAkB,IAAIF,IAASG,SAASC,OAE7CD,SAASC,KAAOJ,MAItBK,SAAW,IAAIC,qBAAqBT,iBAAkB,CAACU,UAAW,IACxE1E,KAAK,SAASwC,QAASqB,GAAUW,SAASG,QAAQd,IAElDS,SAASC,KAAOD,SAASC,MAAQ,OACjCd,cAAca,SAASC,MACvBK,aAAe,IAAMnB,cAAca,SAASC"}